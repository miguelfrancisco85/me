<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	  <meta name="author" content="Miguel Francisco Nuñez Burguera" />
    <meta name="description" content="Personal blog and resume">
    <link rel="shortcut icon" type="image/x-icon" href="/static/img/favicon.ico">

    
      <title>Home Assistant</title>
    

    <!-- Bootstrap -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha256-MfvZlkHCEqatNoGiOXveE8FIwMzZg4W85qfrfIFBfYc= sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ=="
    crossorigin="anonymous">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

	<!-- Custom styles for this template -->
    <link rel="stylesheet" type="text/css" href="/static/css/main.css" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,400,200bold,400old" />
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" />
  <link rel="stylesheet" type="text/css" href="/static/css/syntax.css" />

    <!-- Google Analytics -->
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MX0VKRNCKH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MX0VKRNCKH');
</script>
  </head>
  <!-- Main Body-->
  <body>
  <!-- Wrap all page content here -->
  <div id="wrap">
    <!-- Navbar header -->
    <nav class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="https://www.miguelnunezburguera.com/"><i class="fa fa-home"></i></a>
    </div>
    <div id="navbar">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/projects.html">PROJECTS</a></li>
        <li><a href="https://cv.miguelnunezburguera.com/">RESUME</a></li>
      </ul>
    </div>
  </div>
</nav>


    <div class="container">
	<div class="blog-post">
		<h3>
		  <strong><a href="/post1.html">Home Assistant</a></strong>
		</h3>
	</div>
	<div class="blog-title">
		<h4>
		February 13, 2025
			&nbsp;&nbsp;
			
			 <span class="label label-success">Home Automation</span>
			
			 <span class="label label-success">Smart Home</span>
			
			 <span class="label label-success">IoT</span>
			
		</h4>
	</div>
	<div class="panel panel-default">
		<div class="panel-body">
			<div class="blogpost">
			  <h1 id="home-assistant">Home Assistant</h1>

<p>Home Assistant is an open-source home automation platform that allows users to control their smart devices and create complex automations. It is written in Python and can be installed on various platforms, including Raspberry Pi and Kubernetes clusters using k3s. This document provides an overview of Home Assistant, its features, how to install it on a Raspberry Pi, and how to set it up in a Kubernetes cluster using k3s.</p>

<h2 id="what-is-home-assistant">What is Home Assistant?</h2>

<p>Home Assistant is a flexible and customizable platform that provides users with a central hub to control and automate their smart devices. It enables integration with a wide range of devices and services, including lights, sensors, thermostats, and cameras, supporting over 1400 different devices and services.</p>

<h2 id="home-assistant-features">Home Assistant Features</h2>

<ul>
  <li><strong>Integrations:</strong> Compatible with Google Home, Amazon Alexa, Philips Hue, Nest, and more.</li>
  <li><strong>Automations:</strong> Create complex automations using Home Assistant’s visual editor.</li>
  <li><strong>User Interface:</strong> Highly customizable with configurable dashboards.</li>
  <li><strong>Add-ons:</strong> Growing library of pre-configured software packages to extend functionality.</li>
</ul>

<h2 id="installing-home-assistant-on-raspberry-pi">Installing Home Assistant on Raspberry Pi</h2>

<p>To install Home Assistant on a Raspberry Pi, follow these steps:</p>

<ol>
  <li>Download the latest version of Raspberry Pi OS and flash it onto an SD card.</li>
  <li>Connect the Raspberry Pi to your network and power it on.</li>
  <li>Access it via SSH and run the following commands:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get <span class="nb">install </span>python3 python3-pip
pip3 <span class="nb">install </span>homeassistant
</code></pre></div></div>

<ol>
  <li>Start Home Assistant with:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl start home-assistant@homeassistant.service
</code></pre></div></div>

<ol>
  <li>Access the web interface at <code class="language-plaintext highlighter-rouge">http://&lt;your-raspberry-pi-ip&gt;:8123</code> in your browser.</li>
</ol>

<h2 id="installing-home-assistant-on-kubernetes-with-k3s">Installing Home Assistant on Kubernetes with k3s</h2>

<p>To install Home Assistant on a Kubernetes cluster using k3s:</p>

<ol>
  <li>Install k3s on your Kubernetes cluster.</li>
  <li>Create a new namespace:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl create namespace home-assistant
</code></pre></div></div>

<ol>
  <li>Define the deployment:</li>
</ol>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">home-assistant</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">home-assistant</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">home-assistant</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">home-assistant</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">home-assistant</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s">homeassistant/home-assistant:latest</span>
        <span class="na">ports</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">8123</span>
        <span class="na">volumeMounts</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">config</span>
          <span class="na">mountPath</span><span class="pi">:</span> <span class="s">/config</span>
      <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">config</span>
        <span class="na">persistentVolumeClaim</span><span class="pi">:</span>
          <span class="na">claimName</span><span class="pi">:</span> <span class="s">home-assistant-config</span>
</code></pre></div></div>

<ol>
  <li>Create a persistent volume claim:</li>
</ol>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">PersistentVolumeClaim</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">home-assistant-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">home-assistant</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">accessModes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">ReadWriteOnce</span>
  <span class="na">resources</span><span class="pi">:</span>
    <span class="na">requests</span><span class="pi">:</span>
      <span class="na">storage</span><span class="pi">:</span> <span class="s">1Gi</span>
</code></pre></div></div>

<ol>
  <li>Apply the configurations:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl apply <span class="nt">-f</span> deployment.yaml
kubectl apply <span class="nt">-f</span> pvc.yaml
</code></pre></div></div>

<ol>
  <li>Access the web interface at <code class="language-plaintext highlighter-rouge">http://&lt;your-kubernetes-node-ip&gt;:&lt;node-port&gt;</code>.</li>
</ol>

<p>Optionally, you can expose Home Assistant to the internet using a Kubernetes ingress controller or a load balancer.</p>

			   <hr>
			   <div class="related-posts">
				   <h5>Related Posts</h5>
				   
						<div class="row">
							 <div class="col-sm-4 col-md-4 col-lg-4">
								 <h6 style="text-align: right">
								 	February 13, 2025
								 </h6>
							 </div>
							 <div class="col-sm-8 col-md-8 col-lg-8">
								 <h6 style="text-align: left">
								 	<strong><a href="https://miguelnunezburguera.com/post7.html">Long-Term Dividend Investing</a></strong>
								 </h6>
							 </div>
						</div>
					
						<div class="row">
							 <div class="col-sm-4 col-md-4 col-lg-4">
								 <h6 style="text-align: right">
								 	February 13, 2025
								 </h6>
							 </div>
							 <div class="col-sm-8 col-md-8 col-lg-8">
								 <h6 style="text-align: left">
								 	<strong><a href="https://miguelnunezburguera.com/post6.html">Traefik</a></strong>
								 </h6>
							 </div>
						</div>
					
						<div class="row">
							 <div class="col-sm-4 col-md-4 col-lg-4">
								 <h6 style="text-align: right">
								 	February 13, 2025
								 </h6>
							 </div>
							 <div class="col-sm-8 col-md-8 col-lg-8">
								 <h6 style="text-align: left">
								 	<strong><a href="https://miguelnunezburguera.com/post5.html">MetalLB</a></strong>
								 </h6>
							 </div>
						</div>
					
			   </div>
			</div>
		</div>
	</div>
	

</div>


  </div>
  <!-- Footer -->
  <footer>
    <div id="footer">
        <div class="container">
            <p class="text-muted">© All rights reserved.</p>
        </div>
    </div>
</footer>
<div class="footer"></div>


   

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"
    integrity="sha256-Sk3nkD6mLTMOF0EOpNtsIry+s1CsaqQC1rVLTAy+0yc= sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ=="
    crossorigin="anonymous"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="/static/js/docs.min.js"></script>
    <script src="/static/js/main.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/static/js/ie10-viewport-bug-workaround.js"></script>
	  
	  <!-- Mathjax Support -->
    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    },
    "HTML-CSS": { fonts: ["TeX"] }
  });
    </script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
	  
  </body>
</html>
